{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//* Export render function \nexport const renderGallery = imageEl => {\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${imageEl.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${imageEl.webformatURL}\" alt=\"${imageEl.tags}\">\n        </a>\n        \n        <div class='description-image'>\n        <p>\n        Likes <br>\n        ${imageEl.likes}\n        </p>\n        <p>\n        Views <br>\n        ${imageEl.views}\n        </p>\n        <p>\n        Likes <br>\n        ${imageEl.likes}\n        </p>\n        <p>Downloads <br>\n        ${imageEl.comments}</p>\n\n        </div>\n    </li>`\n}","//* Import modules\nimport { renderGallery } from \"./render-functions\";\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n//* Export fetch function\nexport const fetchImg = async (userQuery, gallery, queryInput, page) => {\n    const pageLoader = document.querySelector('.loader');\n    pageLoader.classList.remove('is-hidden');\n\n    const galleryData = await axios.get(`https://pixabay.com/api/?q=${userQuery}&key=39635982-91d856b8fc78635a8aaf79b21&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`);\n\n    pageLoader.classList.add('is-hidden');\n    gallery.innerHTML = '';\n    queryInput.value = '';\n\n    if (galleryData.data.total === 0) {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '25',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageSize: '15',\n            position: 'bottomRight'\n        });\n        return;\n    }\n\n    let galleryHTML = [];\n    galleryData.data.hits.map(imageEl => {\n        galleryHTML.push(renderGallery(imageEl));\n    });\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML.join(' '));\n\n    const lightbox = new SimpleLightbox('.gallery-list a', {\n        captionSelector: 'img',\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    return galleryData;\n}\n\n//* Export Load more function\nexport const loadMore = async (userQuery, page) => {\n    const pageLoader = document.querySelector('.loader');\n    pageLoader.classList.remove('is-hidden');\n\n    const galleryData = await axios.get(`https://pixabay.com/api/?q=${userQuery}&key=39635982-91d856b8fc78635a8aaf79b21&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`);\n\n    pageLoader.classList.add('is-hidden');\n\n    return galleryData;\n}","//TODO: Інтерактивна галерея\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\n//* Import modules\nimport { fetchImg, loadMore } from \"./js/pixabay-api\";\nimport { renderGallery } from \"./js/render-functions\";\n\n//* Find elements\nconst queryForm = document.querySelector('.user-query-form'); \nconst queryInput = document.querySelector('.user-query-input'); \nconst queryBtn = document.querySelector('.user-query-btn');\nconst gallery = document.querySelector('.gallery-list');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst pageLoader = document.querySelector('.loader');\n\n//* Function variables \nlet userQuery;\nlet page = 1;\nlet totalPages;\n\n//* On form submit function\nconst onFormSubmit = async event => {\n    event.preventDefault();\n    userQuery = queryInput.value.trim();\n\n    if (userQuery === '') {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '25',\n            message: 'Please fill the gap!',\n            messageSize: '20',\n            position: 'bottomRight'\n        });\n\n        return;\n    }\n\n    loadMoreBtn.classList.add('is-hidden');\n    pageLoader.classList.remove('is-hidden');\n    page = 1;\n\n    const { data } = await fetchImg(userQuery, gallery, queryInput, page);\n\n    pageLoader.classList.add('is-hidden');\n\n    totalPages = Math.floor(data.totalHits / 15);\n    if (totalPages <= 1) {\n        return;\n    }\n    else if (page <= totalPages) {\n        if (page === totalPages) {\n                loadMoreBtn.classList.add('is-hidden');\n                return;\n            }\n\n        loadMoreBtn.classList.remove('is-hidden');\n        loadMoreBtn.addEventListener('click', onLoadMoreClick);\n    }\n}\n\n//* On load-more-button click function\nconst onLoadMoreClick = async event => {\n    try {\n        page++;\n        pageLoader.classList.remove('is-hidden');\n\n        const { data } = await loadMore(userQuery, page);\n\n        pageLoader.classList.add('is-hidden');\n\n        if (page === totalPages) {\n            iziToast.info({\n                title: '',\n                titleSize: '25',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageSize: '20',\n                position: 'bottomRight'\n            });\n\n            loadMoreBtn.classList.add('is-hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreClick);\n        }\n\n        const galleryTemplate = data.hits.map(el => renderGallery(el)).join('');\n\n        gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n\n        const lightbox = new SimpleLightbox('.gallery-list a', {\n            captionSelector: 'img',\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n\n        const galleryItem = document.querySelector('.gallery-item');\n        const rect = galleryItem.getBoundingClientRect()\n\n        window.scrollBy({\n            top: rect.height*2,\n            left: 0,\n            behavior: \"smooth\",\n        });\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nqueryForm.addEventListener('submit', onFormSubmit);"],"names":["renderGallery","imageEl","fetchImg","userQuery","gallery","queryInput","page","pageLoader","galleryData","axios","iziToast","galleryHTML","SimpleLightbox","loadMore","queryForm","loadMoreBtn","totalPages","onFormSubmit","event","data","onLoadMoreClick","galleryTemplate","el","lightbox","rect","err"],"mappings":"owBACO,MAAMA,EAAgBC,GAClB;AAAA;AAAA,wCAE6BA,EAAQ,aAAa;AAAA,8CACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAM9EA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,UAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,UAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA,UAGbA,EAAQ,QAAQ;AAAA;AAAA;AAAA,WCXbC,EAAW,MAAOC,EAAWC,EAASC,EAAYC,IAAS,CACpE,MAAMC,EAAa,SAAS,cAAc,SAAS,EACnDA,EAAW,UAAU,OAAO,WAAW,EAEvC,MAAMC,EAAc,MAAMC,EAAM,IAAI,8BAA8BN,CAAS,oHAAoHG,CAAI,EAAE,EAMrM,GAJAC,EAAW,UAAU,IAAI,WAAW,EACpCH,EAAQ,UAAY,GACpBC,EAAW,MAAQ,GAEfG,EAAY,KAAK,QAAU,EAAG,CAC9BE,EAAS,MAAM,CACX,MAAO,QACP,UAAW,KACX,QAAS,2EACT,YAAa,KACb,SAAU,aACtB,CAAS,EACD,MACH,CAED,IAAIC,EAAc,CAAA,EAClB,OAAAH,EAAY,KAAK,KAAK,IAAIP,GAAW,CACjCU,EAAY,KAAKX,EAAcC,CAAO,CAAC,CAC/C,CAAK,EAEDG,EAAQ,mBAAmB,YAAaO,EAAY,KAAK,GAAG,CAAC,EAE5C,IAAIC,EAAe,kBAAmB,CACnD,gBAAiB,MACjB,aAAc,MACd,aAAc,GACtB,CAAK,EAEMJ,CACX,EAGaK,EAAW,MAAOV,EAAWG,IAAS,CAC/C,MAAMC,EAAa,SAAS,cAAc,SAAS,EACnDA,EAAW,UAAU,OAAO,WAAW,EAEvC,MAAMC,EAAc,MAAMC,EAAM,IAAI,8BAA8BN,CAAS,oHAAoHG,CAAI,EAAE,EAErM,OAAAC,EAAW,UAAU,IAAI,WAAW,EAE7BC,CACX,EC1CMM,EAAY,SAAS,cAAc,kBAAkB,EACrDT,EAAa,SAAS,cAAc,mBAAmB,EAC5C,SAAS,cAAc,iBAAiB,EACzD,MAAMD,EAAU,SAAS,cAAc,eAAe,EAChDW,EAAc,SAAS,cAAc,gBAAgB,EACrDR,EAAa,SAAS,cAAc,SAAS,EAGnD,IAAIJ,EACAG,EAAO,EACPU,EAGJ,MAAMC,EAAe,MAAMC,GAAS,CAIhC,GAHAA,EAAM,eAAc,EACpBf,EAAYE,EAAW,MAAM,OAEzBF,IAAc,GAAI,CAClBO,EAAS,MAAM,CACX,MAAO,QACP,UAAW,KACX,QAAS,uBACT,YAAa,KACb,SAAU,aACtB,CAAS,EAED,MACH,CAEDK,EAAY,UAAU,IAAI,WAAW,EACrCR,EAAW,UAAU,OAAO,WAAW,EACvCD,EAAO,EAEP,KAAM,CAAE,KAAAa,CAAM,EAAG,MAAMjB,EAASC,EAAWC,EAASC,EAAYC,CAAI,EAKpE,GAHAC,EAAW,UAAU,IAAI,WAAW,EAEpCS,EAAa,KAAK,MAAMG,EAAK,UAAY,EAAE,EACvC,EAAAH,GAAc,IAGTV,GAAQU,EAAY,CACzB,GAAIV,IAASU,EAAY,CACjBD,EAAY,UAAU,IAAI,WAAW,EACrC,MACH,CAELA,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASK,CAAe,CACxD,CACL,EAGMA,EAAkB,MAAMF,GAAS,CACnC,GAAI,CACAZ,IACAC,EAAW,UAAU,OAAO,WAAW,EAEvC,KAAM,CAAE,KAAAY,CAAI,EAAK,MAAMN,EAASV,EAAWG,CAAI,EAE/CC,EAAW,UAAU,IAAI,WAAW,EAEhCD,IAASU,IACTN,EAAS,KAAK,CACV,MAAO,GACP,UAAW,KACX,QAAS,6DACT,YAAa,KACb,SAAU,aAC1B,CAAa,EAEDK,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASK,CAAe,GAG5D,MAAMC,EAAkBF,EAAK,KAAK,IAAIG,GAAMtB,EAAcsB,CAAE,CAAC,EAAE,KAAK,EAAE,EAEtElB,EAAQ,mBAAmB,YAAaiB,CAAe,EAEvD,MAAME,EAAW,IAAIX,EAAe,kBAAmB,CACnD,gBAAiB,MACjB,aAAc,MACd,aAAc,GAC1B,CAAS,EAGKY,EADc,SAAS,cAAc,eAAe,EACjC,sBAAuB,EAEhD,OAAO,SAAS,CACZ,IAAKA,EAAK,OAAO,EACjB,KAAM,EACN,SAAU,QACtB,CAAS,CACJ,OAAQC,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CACL,EAEAX,EAAU,iBAAiB,SAAUG,CAAY"}