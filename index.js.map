{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//* Export render function \nexport const renderGallery = imageEl => {\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${imageEl.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${imageEl.webformatURL}\" alt=\"${imageEl.tags}\">\n        </a>\n        \n        <div class='description-image'>\n        <p>\n        Likes <br>\n        ${imageEl.likes}\n        </p>\n        <p>\n        Views <br>\n        ${imageEl.views}\n        </p>\n        <p>\n        Likes <br>\n        ${imageEl.likes}\n        </p>\n        <p>Downloads <br>\n        ${imageEl.comments}</p>\n\n        </div>\n    </li>`\n}","//* Import modules\nimport { renderGallery } from \"./render-functions\";\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nimport axios from \"axios\";\n\n//* Export fecth function\nexport const fetchImg = async (userQuery, gallery, queryInput, page) => {\n    const mainEl = document.querySelector('main');\n    mainEl.insertAdjacentHTML('beforeend', `<span class=\"loader\"></span>`)\n\n    const pageLoader = document.querySelector('.loader');\n\n    const galleryData = await axios.get(`https://pixabay.com/api/?q=${userQuery}&key=39635982-91d856b8fc78635a8aaf79b21&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`)\n\n    pageLoader.remove();\n    gallery.innerHTML = '';\n    queryInput.value = '';\n\n    if (galleryData.data.total === 0) {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '25',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageSize: '15',\n            position: 'bottomRight'\n        });\n        return;\n    }\n\n    let galleryHTML = [];\n    galleryData.data.hits.map(imageEl => {\n        galleryHTML.push(renderGallery(imageEl));\n    })\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML.join(' '));\n\n    const lightbox = new SimpleLightbox('.gallery-list a', {\n        captionSelector: 'img',\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    return galleryData;\n}\n\n//* Export Load more function\nexport const loadMore = async (userQuery, gallery, queryInput, page) => {\n    const mainEl = document.querySelector('main');\n    mainEl.insertAdjacentHTML('beforeend', `<span class=\"loader\"></span>`)\n\n    const pageLoader = document.querySelector('.loader');\n\n    const galleryData = await axios.get(`https://pixabay.com/api/?q=${userQuery}&key=39635982-91d856b8fc78635a8aaf79b21&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`)\n\n    pageLoader.remove();\n\n    return galleryData;\n}","//TODO: Інтерактивна галерея\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\n//* Import modules\nimport { fetchImg } from \"./js/pixabay-api\";\nimport { renderGallery } from \"./js/render-functions\";\nimport { loadMore } from \"./js/pixabay-api\";\n\n//* Find elements\nconst queryForm = document.querySelector('.user-query-form'); \nconst queryInput = document.querySelector('.user-query-input'); \nconst queryBtn = document.querySelector('.user-query-btn');\nconst gallery = document.querySelector('.gallery-list');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet userQuery;\nlet page = 1;\n\n\n//* Add event listener & apply modules\nconst onFormSubmit = async event => {\n    event.preventDefault();\n    userQuery = queryInput.value.trim();\n\n    if (userQuery === '') {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '25',\n            message: 'Please fill the gap!',\n            messageSize: '20',\n            position: 'bottomRight'\n        });\n\n        return;\n    }\n\n    loadMoreBtn.classList.add('is-hidden');\n    page = 1;\n    const { data } = await fetchImg(userQuery, gallery, queryInput, page);\n    console.log(data);\n\n    if (data.totalHits > 1) {\n        loadMoreBtn.classList.remove('is-hidden');\n        \n        loadMoreBtn.addEventListener('click', onLoadMoreClick)\n    }\n}\n\nconst onLoadMoreClick = async event => {\n    page++;\n    \n    const { data } = await loadMore(userQuery, gallery, queryInput, page);\n\n    const galleryTemplate = data.hits.map(el => renderGallery(el)).join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    const lightbox = new SimpleLightbox('.gallery-list a', {\n        captionSelector: 'img',\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    if (data.hits.length === 0) {\n        loadMoreBtn.classList.add('is-hidden')\n        loadMoreBtn.removeEventListener('click', onLoadMoreClick)\n    }\n}\n\nqueryForm.addEventListener('submit', onFormSubmit);\n"],"names":["renderGallery","imageEl","fetchImg","userQuery","gallery","queryInput","page","pageLoader","galleryData","axios","iziToast","galleryHTML","SimpleLightbox","loadMore","queryForm","loadMoreBtn","onFormSubmit","event","data","onLoadMoreClick","galleryTemplate","el"],"mappings":"owBACO,MAAMA,EAAgBC,GAClB;AAAA;AAAA,wCAE6BA,EAAQ,aAAa;AAAA,8CACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAM9EA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,UAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,UAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA,UAGbA,EAAQ,QAAQ;AAAA;AAAA;AAAA,WCdN,SAAS,cAAc,gBAAgB,EAKpD,MAAMC,EAAW,MAAOC,EAAWC,EAASC,EAAYC,IAAS,CACrD,SAAS,cAAc,MAAM,EACrC,mBAAmB,YAAa,8BAA8B,EAErE,MAAMC,EAAa,SAAS,cAAc,SAAS,EAE7CC,EAAc,MAAMC,EAAM,IAAI,8BAA8BN,CAAS,oHAAoHG,CAAI,EAAE,EAMrM,GAJAC,EAAW,OAAM,EACjBH,EAAQ,UAAY,GACpBC,EAAW,MAAQ,GAEfG,EAAY,KAAK,QAAU,EAAG,CAC9BE,EAAS,MAAM,CACX,MAAO,QACP,UAAW,KACX,QAAS,2EACT,YAAa,KACb,SAAU,aACtB,CAAS,EACD,MACH,CAED,IAAIC,EAAc,CAAA,EAClB,OAAAH,EAAY,KAAK,KAAK,IAAIP,GAAW,CACjCU,EAAY,KAAKX,EAAcC,CAAO,CAAC,CAC/C,CAAK,EAEDG,EAAQ,mBAAmB,YAAaO,EAAY,KAAK,GAAG,CAAC,EAE5C,IAAIC,EAAe,kBAAmB,CACnD,gBAAiB,MACjB,aAAc,MACd,aAAc,GACtB,CAAK,EAEMJ,CACX,EAGaK,EAAW,MAAOV,EAAWC,EAASC,EAAYC,IAAS,CACrD,SAAS,cAAc,MAAM,EACrC,mBAAmB,YAAa,8BAA8B,EAErE,MAAMC,EAAa,SAAS,cAAc,SAAS,EAE7CC,EAAc,MAAMC,EAAM,IAAI,8BAA8BN,CAAS,oHAAoHG,CAAI,EAAE,EAErM,OAAAC,EAAW,OAAM,EAEVC,CACX,EC/CMM,EAAY,SAAS,cAAc,kBAAkB,EACrDT,EAAa,SAAS,cAAc,mBAAmB,EAC5C,SAAS,cAAc,iBAAiB,EACzD,MAAMD,EAAU,SAAS,cAAc,eAAe,EAChDW,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIZ,EACAG,EAAO,EAIX,MAAMU,EAAe,MAAMC,GAAS,CAIhC,GAHAA,EAAM,eAAc,EACpBd,EAAYE,EAAW,MAAM,OAEzBF,IAAc,GAAI,CAClBO,EAAS,MAAM,CACX,MAAO,QACP,UAAW,KACX,QAAS,uBACT,YAAa,KACb,SAAU,aACtB,CAAS,EAED,MACH,CAEDK,EAAY,UAAU,IAAI,WAAW,EACrCT,EAAO,EACP,KAAM,CAAE,KAAAY,CAAM,EAAG,MAAMhB,EAASC,EAAWC,EAASC,EAAYC,CAAI,EACpE,QAAQ,IAAIY,CAAI,EAEZA,EAAK,UAAY,IACjBH,EAAY,UAAU,OAAO,WAAW,EAExCA,EAAY,iBAAiB,QAASI,CAAe,EAE7D,EAEMA,EAAkB,MAAMF,GAAS,CACnCX,IAEA,KAAM,CAAE,KAAAY,CAAM,EAAG,MAAML,EAASV,EAAWC,EAASC,EAAYC,CAAI,EAE9Dc,EAAkBF,EAAK,KAAK,IAAIG,GAAMrB,EAAcqB,CAAE,CAAC,EAAE,KAAK,EAAE,EAEtEjB,EAAQ,mBAAmB,YAAagB,CAAe,EAEtC,IAAIR,EAAe,kBAAmB,CACnD,gBAAiB,MACjB,aAAc,MACd,aAAc,GACtB,CAAK,EAEGM,EAAK,KAAK,SAAW,IACrBH,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASI,CAAe,EAEhE,EAEAL,EAAU,iBAAiB,SAAUE,CAAY"}