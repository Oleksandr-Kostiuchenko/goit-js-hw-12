{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//* Import libraries\nimport axios from \"axios\"; \n\n//* Export fetch function\nexport const fetchImg = async (userQuery, page) => {\n    const galleryData = await axios.get(`https://pixabay.com/api/?q=${userQuery}&key=39635982-91d856b8fc78635a8aaf79b21&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`);\n\n    return galleryData;\n}","//* Export render function \nexport const renderGallery = imageEl => {\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${imageEl.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${imageEl.webformatURL}\" alt=\"${imageEl.tags}\">\n        </a>\n        \n        <div class='description-image'>\n        <p>\n        Likes <br>\n        ${imageEl.likes}\n        </p>\n        <p>\n        Views <br>\n        ${imageEl.views}\n        </p>\n        <p>\n        Likes <br>\n        ${imageEl.likes}\n        </p>\n        <p>Downloads <br>\n        ${imageEl.comments}</p>\n\n        </div>\n    </li>`\n}","//TODO: Інтерактивна галерея\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n//* Import modules\nimport { fetchImg } from \"./js/pixabay-api\";\nimport { renderGallery } from \"./js/render-functions\";\n\n//* Find elements\nconst queryForm = document.querySelector('.user-query-form'); \nconst queryInput = document.querySelector('.user-query-input'); \nconst queryBtn = document.querySelector('.user-query-btn');\nconst gallery = document.querySelector('.gallery-list');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst pageLoader = document.querySelector('.loader');\n\n//* Function variables \nlet userQuery;\nlet page = 1;\nlet totalPages;\n\n//* Initializate gallery \nconst lightbox = new SimpleLightbox('.gallery-list a', {\n    captionSelector: 'img',\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n//* On form submit function\nconst onFormSubmit = async event => {\n    try {\n        event.preventDefault();\n        userQuery = queryInput.value.trim();\n\n        if (userQuery === '') {\n            iziToast.error({\n                title: 'Error',\n                titleSize: '25',\n                message: 'Please fill the gap!',\n                messageSize: '20',\n                position: 'bottomRight'\n            });\n\n            return;\n        }\n\n        loadMoreBtn.classList.add('is-hidden');\n        pageLoader.classList.remove('is-hidden');\n        page = 1;\n\n        const { data } = await fetchImg(userQuery, page);\n\n        gallery.innerHTML = '';\n        queryInput.value = '';\n        pageLoader.classList.add('is-hidden');\n\n        if (data.total === 0) {\n            iziToast.error({\n                title: 'Error',\n                titleSize: '25',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageSize: '15',\n                position: 'bottomRight'\n            });\n            return;\n        }\n        \n        let galleryHTML = [];\n        data.hits.forEach(imageEl => {\n            galleryHTML.push(renderGallery(imageEl));\n        });\n\n        gallery.insertAdjacentHTML('beforeend', galleryHTML.join(''));\n        lightbox.refresh();\n\n        totalPages = Math.ceil(data.totalHits / 15);\n        if (totalPages <= 1) {\n            return;\n        }\n        else if (page <= totalPages) {\n            if (page === totalPages) {\n                    loadMoreBtn.classList.add('is-hidden');\n                    return;\n                }\n\n            loadMoreBtn.classList.remove('is-hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreClick);\n            loadMoreBtn.addEventListener('click', onLoadMoreClick);\n        }\n    } catch (err) {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '25',\n            message: 'Something went wrong',\n            messageSize: '20',\n            position: 'bottomRight'\n        });\n    }    \n}\n\n//* On load-more-button click function\nconst onLoadMoreClick = async event => {\n    try {\n        page++;\n        pageLoader.classList.remove('is-hidden');\n\n        const { data } = await fetchImg(userQuery, page);\n\n        pageLoader.classList.add('is-hidden');\n\n        if (page >= totalPages) {\n            iziToast.info({\n                title: '',\n                titleSize: '25',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageSize: '20',\n                position: 'bottomRight'\n            });\n\n            loadMoreBtn.classList.add('is-hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreClick);\n        }\n\n        const galleryTemplate = data.hits.map(el => renderGallery(el)).join('');\n        gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n        lightbox.refresh();\n\n        const galleryItem = document.querySelector('.gallery-item');\n        const rect = galleryItem.getBoundingClientRect()\n\n        window.scrollBy({\n            top: rect.height*2,\n            left: 0,\n            behavior: \"smooth\",\n        });\n    } catch (err) {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '25',\n            message: 'Something went wrong',\n            messageSize: '20',\n            position: 'bottomRight'\n        });\n    }\n}\n\nqueryForm.addEventListener('submit', onFormSubmit);"],"names":["fetchImg","userQuery","page","axios","renderGallery","imageEl","queryForm","queryInput","gallery","loadMoreBtn","pageLoader","totalPages","lightbox","SimpleLightbox","onFormSubmit","event","iziToast","data","galleryHTML","onLoadMoreClick","galleryTemplate","el","rect"],"mappings":"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"}